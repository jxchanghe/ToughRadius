<!DOCTYPE html>
<html lang="zh-CN">
  <head>
   <#include "/header.html" parse=true>
   <script type="text/javascript">
   function deleteOnline(sessionId,client)
   {
	    if(confirm("确认删除吗？")){
	        window.location.href = "/online?op=delete&sessionId="+sessionId+"&clinet="+client;
	    }
   }
   </script>   
  </head>
  <body>
  <#include "/nav.html" parse=true>
	<div class="main-box">
		<div class="container">
		    <div class="row">
               <#include "/menu.html" parse=true>
				<div class="span9">
					<ul class="breadcrumb">
						<li><b>在线用户查询</b></li>
					</ul>
					<form class="form-inline" action="/online" method="get">
					  <label class="control-label" for="userName">用户名:</label>
					  <input type="text" class="span2" id="userName" name="userName" value="${param_userName!!}" placeholder="支持模糊查询">
					  <button type="submit" class="btn">查询</button>
					</form>
					<table class="table table-striped table-bordered table-hover">
					  <thead>
							<tr>
								<th>用户名</th>
								<th>客户端</th>
								<th>ip地址</th>
								<th>Mac地址</th>
								<th>上线时间</th>
								<th>会话ID</th>
								<th>操作</th>
							</tr>			
						</thead>		
						<tbody>
							<#list onlines as online>
							<tr>
								<td>${online.getUserName()}</td>
								<td>${online.getClientAddress()}</td>
								<td>${online.getIpAddress()}</td>
								<td>${online.getMacAddress()}</td>
								<td>${online.getAcctStart()}</td>
								<td>${online.getSessionId()}</td>
								<td>
								<a href="javascript:deleteOnline('${user.getSessionId()}','${user.getClientAddress()}')">解锁</a>
								</td>
							</tr>
							</#list>
						</tbody>
					</table>
					
					<#if prev?? ||  next??>
                        <ul class="pager">
                        <#if prev??>
                        <li> <a href="/user?page=${prev}">上一页</a></li>
                        </#if>
                        <#if next??>
                        <li><a href="/user?page=${next}">下一页</a></li>
                        </#if>
                        </ul>
                    </#if>              
					
				</div>
			</div>
		</div>
    </div > <!-- /container -->
  <#include "/footer.html" parse=true>
  </body>
</html>
